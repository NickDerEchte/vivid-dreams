<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block Avoid | Vivid Dreams</title>
    <link rel="stylesheet" href="/">
    <script src="/styles.css" defer></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="fav.png" type="image/x-icon">

    <!-- Font Import -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
</head>

<body>
    <header>
        <a href="https://www.vividdreams.space/">
            <img src="vd_games.svg" alt="Vivid Dreams Games Logo">
        </a>
        <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle navigation" aria-expanded="false"
            aria-controls="primary-nav">
            <span class="sr-only">Toggle navigation</span>
            <span class="hamburger-icon" aria-hidden="true">
                <span class="hamburger-bar"></span>
                <span class="hamburger-bar"></span>
                <span class="hamburger-bar"></span>
            </span>
        </button>
        <div class="nav-links" id="primary-nav">
            <div class="nav-links-inner">
                <a href="#about">About</a>
                <a href="#screenshots">Screenshots</a>
                <a href="#download">Download</a>
                <a href="#res">Resources</a>
            </div>
        </div>
    </header>
    <main>
        <div class="not-image-area">
            <img src="logo.png" alt="Game Logo">
            <h2>Avoid the blocks - trickier than it sounds.</h2>
            <a href="#download">
                <button class="btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7 10 12 15 17 10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>

                    <p>Download Now</p>
                </button>
            </a>
        </div>
        <div class="bg-preview">
            <img src="screen_bg.png" alt="Blending Red Background">
        </div>
    </main>

    <secton id="about">
        <h1>About</h1>
        <p>In this exciting game, players navigate a maze of blocks and tricky obstacles. The goal? Keep your cursor
            clear of barriers while racing against the clock. Each level increases in difficulty with new shapes and
            faster speeds. Can you master precision and avoid touching anything? Test your skills and see how far you
            can go!</p>
        </section>
        <section id="screenshots">
            <h1>Screenshots</h1>
            <div class="screenshot-gallery">
                <img src="screenshots/default.png" alt="Screenshot 1">
                <img src="screenshots/default.png" alt="Screenshot 2">
                <img src="screenshots/default.png" alt="Screenshot 3">
                <img src="screenshots/default.png" alt="Screenshot 3">
            </div>
        </section>

        <section id="download">
            <h1>Download</h1>

            <div class="button-align">
                <a href="https://www.nickfigner.com/">
                    <button class="btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="7 10 12 15 17 10" />
                            <line x1="12" y1="15" x2="12" y2="3" />
                        </svg>

                        <p>Full Version</p>
                    </button>
                </a>

                <a href="https://www.nickfigner.com/">
                    <button class="btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="7 10 12 15 17 10" />
                            <line x1="12" y1="15" x2="12" y2="3" />
                        </svg>

                        <p>Light Version</p>
                    </button>
                </a>
            </div>
            <p><b>Full Version:</b> Game and font<br>
                <b>Light Version:</b> Game</p>

        </section>

        <section id="res">
            <h1>Resources</h1>
            <div class="text">
                <p>Download press assets like logos, screenshots and more.</p>
            </div>
            <a href="https://www.nickfigner.com/">
                <button class="btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7 10 12 15 17 10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>
                    <p>Download Press Kit</p>
                </button>
            </a>
        </section>

        <div class="spacer-footer"></div>


        <footer>
            <iframe id="footer-iframe" src="https://vividdreams.space/footer.html" onload="resizeIframe(this)"
                width="100%" frameborder="0" scrolling="no" class="footer-frame"></iframe>
        </footer>
</body>
<script>
    (function () {
        const iframeId = 'footer-iframe';
        const fallbackHeight = 620;

        window.resizeIframe = function (iframe) {
            if (!iframe) return;
            iframe.style.height = `${fallbackHeight}px`;
        };

        window.addEventListener('message', (event) => {
            const data = event.data;
            if (!data || data.type !== 'footerHeight') return;

            const iframe = document.getElementById(iframeId);
            if (!iframe || event.source !== iframe.contentWindow) return;

            const height = Number(data.height);
            if (!Number.isFinite(height) || height <= 0) return;

            iframe.style.height = `${height}px`;
        });
    })();

    (function () {
        const body = document.body;
        const toggle = document.getElementById('mobile-menu-toggle');
        const nav = document.getElementById('primary-nav');
        const header = document.querySelector('header');
        const logo = header ? header.querySelector('img') : null;

        if (!toggle || !nav || !header || !logo) return;

        const isMobileEnabled = () => body.classList.contains('mobile-nav-enabled');

        const setMenuState = (shouldOpen) => {
            const allowOpen = Boolean(shouldOpen) && isMobileEnabled();
            nav.classList.toggle('is-open', allowOpen);
            toggle.setAttribute('aria-expanded', String(allowOpen));
            body.classList.toggle('mobile-nav-open', allowOpen);
        };

        const closeMenu = () => setMenuState(false);

        toggle.addEventListener('click', () => {
            if (!isMobileEnabled()) return;
            const isOpen = nav.classList.contains('is-open');
            setMenuState(!isOpen);
        });

        nav.querySelectorAll('a').forEach((link) => {
            link.addEventListener('click', closeMenu);
        });

        const applyMobileEnabled = (enabled) => {
            body.classList.toggle('mobile-nav-enabled', enabled);
            if (!enabled) {
                closeMenu();
            } else if (!nav.classList.contains('is-open')) {
                toggle.setAttribute('aria-expanded', 'false');
                body.classList.remove('mobile-nav-open');
            }
        };

        let measuring = false;

        const detectOverflow = () => {
            if (measuring) return;
            measuring = true;

            const wasMobile = body.classList.contains('mobile-nav-enabled');
            const wasOpen = nav.classList.contains('is-open');

            if (wasMobile) {
                body.classList.remove('mobile-nav-enabled');
                nav.classList.remove('is-open');
                body.classList.remove('mobile-nav-open');
                toggle.setAttribute('aria-expanded', 'false');
            }

            const headerRect = header.getBoundingClientRect();
            const headerStyles = getComputedStyle(header);
            const paddingLeft = parseFloat(headerStyles.paddingLeft || '0');
            const paddingRight = parseFloat(headerStyles.paddingRight || '0');
            const headerWidth = headerRect.width;
            const logoWidth = logo.getBoundingClientRect().width;
            const navWidth = nav.scrollWidth;
            const widthNeeded = navWidth + logoWidth + paddingLeft + paddingRight;

            const navRect = nav.getBoundingClientRect();
            const widthTolerance = 12;
            const heightTolerance = 6;
            const overflowTolerance = 6;

            const widthExceeded = widthNeeded - headerWidth > widthTolerance;
            const navWrapped = navRect.bottom - headerRect.bottom > heightTolerance;
            const hasXOverflow = (document.documentElement.scrollWidth - document.documentElement.clientWidth) > overflowTolerance;

            const needsMobile = widthExceeded || navWrapped || hasXOverflow;

            applyMobileEnabled(needsMobile);

            if (needsMobile && wasOpen) {
                setMenuState(true);
            }

            measuring = false;
        };

        const debouncedDetect = (() => {
            let timer;
            return () => {
                clearTimeout(timer);
                timer = setTimeout(detectOverflow, 120);
            };
        })();

        detectOverflow();
        window.addEventListener('resize', debouncedDetect);
        window.addEventListener('orientationchange', detectOverflow);
        window.addEventListener('load', detectOverflow);

        if (typeof ResizeObserver !== 'undefined') {
            const observer = new ResizeObserver(debouncedDetect);
            observer.observe(header);
            observer.observe(nav);
        }
    })();
</script>

</html>
